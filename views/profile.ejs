<h2>My Recipes</h2>
<hr>

<h4>Breakfast</h4>
<% let breakfastRecipes = userRecipes.filter( (recipe) => { %>
<%                          return recipe.mealType === 'Breakfast'; %>
<% }) %>

<% breakfastRecipes.forEach( (recipe, index) => { %>
<%   if (index === 0 || index % 3 === 0) { %>
       <div class="row"> <!-- first recipe in row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="<%= recipe.imgUrl %>" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
<%   } else if (index % 3 === 0) { %> <!-- last recipe in row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
       </div> <!-- end of row -->
<%   } else {  %> <!-- recipe in middle of row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
<%   } %>
<% }) %>
<!-- insert final closing row div if the meal type array doesn't end at the end of a row -->

<% if (breakfastRecipes.length % 3 !== 0) { %>
     </div> <!-- end of row -->
<% } %>
<hr>

<h4>Lunch</h4>
<% let lunchRecipes = userRecipes.filter( (recipe) => { %>
<%                          return recipe.mealType === 'Lunch'; %>
<% }) %>

<% lunchRecipes.forEach( (recipe, index) => { %>
<%   if (index === 0 || index % 4 === 0) { %>
       <div class="row"> <!-- first recipe in row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
<%   } else if (index % 3 === 0) { %> <!-- last recipe in row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="..." alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
       </div> <!-- end of row -->
<%   } else {  %> <!-- recipe in middle of row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
<%   } %>
<% }) %>
<!-- insert final closing row div if the meal type array doesn't end at the end of a row -->
<% if (lunchRecipes.length % 4 !== 0) { %>
     </div> <!-- end of row -->
<% } %>
<hr>

<h4>Dinner</h4>
<% let dinnerRecipes = userRecipes.filter( (recipe) => { %>
<%                          return recipe.mealType === 'Dinner'; %>
<% }) %>

<% dinnerRecipes.forEach( (recipe, index) => { %>
<%   if (index === 0 || index % 4 === 0) { %>
       <div class="row"> <!-- first recipe in row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
<%   } else if (index % 3 === 0) { %> <!-- last recipe in row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
       </div> <!-- end of row -->
<%   } else {  %> <!-- recipe in middle of row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
<%   } %>
<% }) %>
<!-- insert final closing row div if the meal type array doesn't end at the end of a row -->
<% if (dinnerRecipes.length % 4 !== 0) { %>
     </div> <!-- end of row -->
<% } %>
<hr>

<h4>Dessert</h4>
<% let dessertRecipes = userRecipes.filter( (recipe) => { %>
<%                          return recipe.mealType === 'Dessert'; %>
<% }) %>

<% dessertRecipes.forEach( (recipe, index) => { %>
<%   if (index === 0 || index % 4 === 0) { %>
       <div class="row"> <!-- first recipe in row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
<%   } else if (index % 3 === 0) { %> <!-- last recipe in row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
       </div><br> <!-- end of row -->
<%   } else {  %> <!-- recipe in middle of row -->
         <div class="col-md-auto col-12">
           <div class="card" style="width: 18rem;">
             <img class="card-img-top" src="" alt="Card image cap">
             <div class="card-body">
               <h5 class="card-title"><%= recipe.recipeName %></h5>
               <p class="card-text">Prep time: <%= recipe.prepTime %><br>Cook time: <%= recipe.cookTime %></p>
               <a href="/profile/viewRecipe"><button type="button" class="btn branded-btn viewRecipeBtn" id="viewRecipeBtn" data-id="<%=recipe._id%>">View recipe</button></a>
             </div>
           </div>
         </div>
<%   } %>
<% }) %>
<!-- insert final closing row div if the meal type array doesn't end at the end of a row -->
<% if (dessertRecipes.length % 4 !== 0) { %>
     </div> <!-- end of row -->
<% } %>
<hr>